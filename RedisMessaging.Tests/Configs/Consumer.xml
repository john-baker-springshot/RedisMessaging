<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net"
		 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://www.springframework.net http://www.springframework.net/schema/objects/spring-objects-1.1.xsd"
     default-lazy-init="true">

  <object id="IConnection"
        type="RedisMessaging.RedisConnection, RedisMessaging"
        singleton="true">
    <constructor-arg name="connectionString" value="localhost:6379"/>
  </object>
  
  <object id="IQueue"
      type="RedisMessaging.RedisQueue, RedisMessaging">
    <constructor-arg name="Name" value="defaultQueue"/>
    <constructor-arg name="TTL" value="0"/>
  </object>

  
  <object id="IContainer"
      type="RedisMessaging.RedisContainer, RedisMessaging"
      singleton="true">
    <constructor-arg name="connection" ref="IConnection"/>
    <property name ="Channels">
      <list>
        <ref object="IChannel"/>
      </list>
    </property>
  </object>



  <object id="IChannel"
      type="RedisMessaging.RedisChannel, RedisMessaging"
      singleton="true">
    <property name="Container" ref="IContainer"/>
    <property name="MessageQueue" ref="IQueue"/>
    <property name="ProcessingQueue" ref="IQueue"/>
    <property name="Listeners">
      <list>
        <ref object ="IListener"/>
      </list>
    </property>
  </object>

  <object id="IListener"
    type="RedisMessaging.Consumer.RedisListener, RedisMessaging" >
    <property name="Channel" ref="IChannel"/>
    <property name="Count" value="5"/>
  </object>
  
</objects>